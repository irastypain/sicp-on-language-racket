# [Глава 1. Построение абстракций с помощью процедур](index.md#Глава-1-Построение-абстракций-с-помощью-процедур)
## [1.2. Процедуры и порождаемые ими процессы](index.md#12-Процедуры-и-порождаемые-ими-процессы)

### Упражнение 1.14
Нарисуйте дерево, иллюстрирующее процесс, который порождается процедурой
`count-change` из раздела 1.2.2 при размене 11 центов. Каковы порядки роста
памяти и числа шагов, используемых этим процессом при увеличении суммы, которую
требуется разменять?

#### Решение
Воспользуемся методом подстановки и нарисуем дерево процесса, который создаёт
процедура `(count-change 11)`.

```
Дерево процесса
                                                                (cc 11 5)
                                                                /       \
                                                        (cc 11 4)       (cc -39 5)
                                                        /       \                \
                                                (cc 11 3)       (cc -14 4)        0
                                                /       \                \         
                                        (cc 11 2)       (cc 1 3)          0
                                      __/       \              \__
                                   __/          (cc 6 2)          \__
                                __/           __/      \             \__
                             __/           __/         (cc 1 2)         \__
                          __/           __/            /      \            \__
                       __/           __/        (cc 1 1)      (cc -4 2)      |
                    __/           __/           /      \              \      |
                 __/              |      (cc 1 0)      (cc 0 1)        0     |
              __/                 |      /             /                     |
              |                   |     0             1                  (cc 1 3)
              |                   |                                      /      \
              |                   |                               (cc 1 2)      (cc -9 3)
              |                   |                               /      \              \
              |                   |                        (cc 1 1)      (cc -4 2)       0
              |                   |                        /      \              \
              |               (cc 6 1)              (cc 1 0)      (cc 0 1)        0
              |               /      \              /             /
              |        (cc 6 0)      (cc 5 1)      0             1
              |        /             /      \                 
              |       0       (cc 5 0)      (cc 4 1)          
              |               /             /      \
          (cc 11 1)          0       (cc 4 0)      (cc 3 1)
         /        \                  /             /      \
 (cc 11 0)        (cc 10 1)         0       (cc 3 0)      (cc 2 1)
 /                /       \                 /             /      \
0         (cc 10 0)       (cc 9 1)         0       (cc 2 0)      (cc 1 1)
          /               /      \                 /             /      \
         0         (cc 9 0)      (cc 8 1)         0       (cc 1 0)      (cc 0 1)
                  /              /      \                 /             /
                 0        (cc 8 0)      (cc 7 1)         0             1
                          /             /      \
                         0       (cc 7 0)      (cc 6 1)
                                 /             /      \
                                0       (cc 6 0)      (cc 5 1)
                                        /             /      \
                                       0       (cc 5 0)      (cc 4 1)
                                               /             /      \
                                              0       (cc 4 0)      (cc 3 1)
                                                      /             /      \
                                                     0       (cc 3 0)      (cc 2 1)
                                                             /             /      \
                                                            0       (cc 2 0)      (cc 1 1)
                                                                    /             /      \
                                                                   0       (cc 1 0)      (cc 0 1)
                                                                          /              /
                                                                         0              1
```

При вызове процедуры `cc` требуется объём памяти, пропорциональный глубине
соответствующего параметрам вызова узла дерева. А так как максимальная высота
дерева растёт линейно с ростом резмениваемой суммы, то порядок роста будет так
же линейно расти. В этом случае порядок роста памяти равен _Θ(n)_.

Так как в условии ничего не сказано про номиналы и количество монет, то будем
считать, что они не изменяются (остаются, как есть: 1, 5, 10, 25, 50). Будем
считать, что сумма достаточно велика и много больше номиналов монет. То в таком
случае количество шагов, необходимых для вычисления `(cc n 1)`, будет равно _Θ(n)_.

При вычислении `(cc n 2)` при достаточно большом `n` необходимо вычислить
`(cc n 1)` и `(cc n-5 2)`. Повторив эту редукцию для второго выражения примерно
_n/5_ раз, мы получим результат. То есть для этого потребуется около _n/5_ шагов,
на каждом из шагов выполняется _Θ(n)_ шагов. Из этого следует, что общее число
шагов будет _Θ(n²)_.

Следуя этому принципу, можно сказать, что число шагов равно _Θ(nᵏ)_, где _n_ -
сумма для размена, а _k_ - число номиналов монет, с помощью которых производится
размен суммы.

Таким образом, порядок роста числа шагов для текущей задачи равен _Θ(n⁵)_.

[Код](../../src/chapter01/exercise_1_14.rkt) | [Тест](../../test/chapter01/test_exercise_1_14.rkt)
--- | ---
