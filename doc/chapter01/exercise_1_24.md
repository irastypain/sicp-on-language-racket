# [Глава 1. Построение абстракций с помощью процедур](index.md#Глава-1-Построение-абстракций-с-помощью-процедур)
## [1.2. Процедуры и порождаемые ими процессы](index.md#12-Процедуры-и-порождаемые-ими-процессы)

### Упражнение 1.24
Модифицируйте процедуру `timed-prime-test` из
[упражнения 1.22](exercise_1_22.md#Упражнение-122) так, чтобы она использовала
`fast-prime?` (метод Ферма) и проверьте каждое из 12 простых чисел, найденных в
этом упражнении. Исходя из того, что у теста Ферма порядок роста _Θ(log n)_, то
какого соотношения времени Вы бы ожидали между проверкой на простоту поблизости
от 1 000 000 и поблизости от 1000? Подтверждают ли это Ваши данные? Можете ли Вы
объяснить наблюдаемое несоответствие, если оно есть?

#### Решение
В решении этого упражнения будем использовать простые числа, отличные от тех,
которые мы использовали в [упражнении 1.22](exercise_1_22.md#Упражнение-122).
Именно как раз те, которые указывались в условии к этому упражнению. То есть
будем использовать числа, начиная с: `1000`, `10 000`, `100 000` и `1 000 000`,
соответственно. Это решение обусловлено тем, что процедура `random` на вход
принимает числа не больше _2³¹_.

Число прогонов теста `fermat-test` установим в `10000`.

```racket
(timed-prime-test 1009)
Number 1009 is simple. Time compute: 18.428955078125ms.

(timed-prime-test 1013)
Number 1013 is simple. Time compute: 18.56982421875ms.

(timed-prime-test 1019)
Number 1019 is simple. Time compute: 19.84912109375ms.

(timed-prime-test 10007)
Number 10007 is simple. Time compute: 23.2939453125ms.

(timed-prime-test 10009)
Number 10009 is simple. Time compute: 18.046142578125ms.

(timed-prime-test 10037)
Number 10037 is simple. Time compute: 22.049072265625ms.

(timed-prime-test 100003)
Number 100003 is simple. Time compute: 24.554931640625ms.

(timed-prime-test 100019)
Number 100019 is simple. Time compute: 23.883056640625ms.

(timed-prime-test 100043)
Number 100043 is simple. Time compute: 25.053955078125ms.

(timed-prime-test 1000003)
Number 1000003 is simple. Time compute: 31.051025390625ms.

(timed-prime-test 1000033)
Number 1000033 is simple. Time compute: 28.905029296875ms.

(timed-prime-test 1000037)
Number 1000037 is simple. Time compute: 27.302001953125ms.
```

Исходя из результатов, можно отметить тот факт, что с увеличением чисел в 10 раз
время увеличивается на константную величину. Здесь заметна логарифмическая
зависимость. Кроме этого, если сравнивать время для `1000` и `1000000`, то можно
увидеть, что разница примерно в два раза.

На основе этого можно говорить о том, что наши ожидания потверждаются
экспериментальными данными.

[Код](../../src/chapter01/exercise_1_24.rkt) |
---|
