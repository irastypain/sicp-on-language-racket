# [Глава 1. Построение абстракций с помощью процедур](index.md#Глава-1-Построение-абстракций-с-помощью-процедур)
## [1.1 Элементы программирования](index.md#11-Элементы-программирования)

### Упражнение 1.7
Проверка `good-enough?`, которую мы использовали для вычисления квадратных
корней, будет довольно неэффективна для поиска квадратных корней от очень
маленьких чисел. Кроме того, в настоящих компьютерах арифметические операции
почти всегда вычисляются с ограниченной точностью. Поэтому наш тест оказывается
неадекватным и для очень больших чисел. Альтернативный подход к реализации
`good-enough?` состоит в том, чтобы следить, как от одной итерации к другой
изменяется `guess`, и остановиться, когда изменение оказывается небольшой долей
значения приближения. Разработайте процедуру вычисления квадратного корня,
которая использует такой вариант проверки на завершение. Верно ли, что на
больших и маленьких числах она работает лучше?

#### Решение
Для того, чтобы процедура вычисления квадратного корня работала на маленьких
числах лучше, модернизируем процедуру `good-enough?`. Вместо того, чтобы
находить разницу между квадратом приближенного значения и исходным числом,
квадрат которого нужно вычислить, и сравнивать с некоторой достаточной точностью,
мы будем находить отношение разницы текущего приближенного значения и
приближенного значения, вычисленном на предыдущем шаге, к предыдущему
приближению и будем сравнивать с некоторой достаточной точностью.

Данное улучшение позволяет более точно вычислять квадратные корни как очень
маленьких чисел, так и довольно больших.

[Код](../../src/chapter01/exercise_1_07.rkt) | [Тест](../../test/chapter01/test_exercise_1_07.rkt)
--- | ---
